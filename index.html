<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Facebook Video Downloader</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
  #video-player { width: 640px; max-width: 100%; margin-bottom: 20px; }
  #download-links a { display: block; margin: 5px 0; color: #007bff; text-decoration: none; }
  #download-links a:hover { text-decoration: underline; }
</style>
</head>
<body>
<h1>Facebook Video Downloader</h1>
<input type="text" id="url-input" style="width: 100%; padding: 8px;" 
  value="https://www.facebook.com/reel/402579285704851/?mibextid=rS40aB7S9Ucbxw6v" />
<button onclick="fetchVideo()">Get Video</button>

<video id="video-player" controls></video>

<div id="download-links"></div>

<script>
async function fetchVideo() {
  const url = document.getElementById('url-input').value.trim();
  if (!url) return alert('Please enter a Facebook video URL');const apiUrl = `https://api.princetechn.com/api/download/facebook?apikey=prince&url=encodeURIComponent(url)`;

  document.getElementById('download-links').innerHTML = 'Loading...';
  document.getElementById('video-player').src = ‚Äù;

  try 
    const res = await fetch(apiUrl);
    const data = await res.json();

    if (data.error || !data.result) 
      document.getElementById('download-links').innerHTML = 'Video not found or API error.';
      return;
    

    // The video URL (usually highest quality)
    const videoUrl = data.result.videoUrl || (data.result.qualities        data.result.qualities[0]?.url);
    if (videoUrl) 
      document.getElementById('video-player').src = videoUrl;
    

    // List all available qualities with download links
    let html = '<h3>Download Links:</h3>';
    if (data.result.qualities        data.result.qualities.length > 0) 
      data.result.qualities.forEach(q => 
        html += `<a href="{q.url}" target="_blank" download>Download q.quality</a>`;
      );
     else if(videoUrl) 
      html += `<a href="{videoUrl}" target="_blank" download>Download Video</a>`;
    } else {
      html += 'No download links available.';
    }
    document.getElementById('download-links').innerHTML = html;

  } catch (err) {document.getElementById('download-links').innerHTML = 'Error fetching video.';
    console.error(err);
  }
}

// Auto fetch on load for pre-filled link
fetchVideo();
</script>
</body>
</html>
